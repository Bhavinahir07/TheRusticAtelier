For the Soup:
    3 tbsp unsalted butter
    1 tbsp olive oil
    2 lbs (approx. 4 large) yellow onions, sliced thin (pole-to-pole)
    1 tsp salt
    ½ tsp granulated sugar (helps with browning)
    2 cloves garlic, minced
    ¼ cup dry sherry or brandy (optional, but traditional for deglazing)
    2 tbsp all-purpose flour
    6 cups (approx. 1.5 liters) high-quality beef broth
    2-3 sprigs fresh thyme
    1 bay leaf
    Freshly ground black pepper, to taste
For the Gratinée (Topping):
    1 small baguette, cut into 1-inch thick slices
    1 ½ cups (approx. 150g) shredded Gruyère cheese
    ¼ cup (approx. 25g) shredded Parmesan cheese (optional, for extra saltiness)

1. Slice the Onions
    Cut the onions in half from pole to pole (root to stem), then peel. Lay the flat side down and slice them thinly, following the grain (again, from pole to pole). This helps them hold their shape better during the long cooking time.
2. Begin the Caramelization
    In a large, heavy-bottomed pot or Dutch oven, melt the butter and olive oil over medium-low heat.
    Add the sliced onions, salt, and sugar. Stir to coat the onions completely.
    Cook, stirring occasionally, for 45-60 minutes. Do not rush this step. The onions will first become soft and translucent, then slowly turn golden, and finally become a deep, rich, mahogany brown.
    Comment: This is the most important step for developing the soup's flavor. Low and slow is the key. If they begin to burn, lower the heat and add a tablespoon of water to scrape up the brown bits (fond) from the bottom of the pot.
3. Deepen the Flavor
    Once the onions are deeply caramelized, add the minced garlic and cook for 1 minute more until fragrant.
4. Deglaze and Thicken
    If using, pour in the sherry or brandy. Turn the heat up slightly and scrape the bottom of the pot to release all the flavorful browned bits. Let the alcohol cook off until it has almost completely evaporated.
    Sprinkle the all-purpose flour over the onions and stir constantly for 1-2 minutes. This "cooks out" the raw flour taste and will help thicken the soup.
5. Build and Simmer the Soup
    Slowly pour in the beef broth, whisking as you go to prevent any flour clumps.
    Add the fresh thyme sprigs (tied with twine, if you like) and the bay leaf.
    Bring the soup to a boil, then reduce the heat to low, cover partially, and let it simmer gently for at least 20-30 minutes for the flavors to meld.
    Tip: After simmering, remove and discard the thyme stems and bay leaf. Taste the soup and adjust seasoning with salt and plenty of freshly ground black pepper.
6. Prepare for the Gratinée
    While the soup simmers, preheat your oven's broiler (grill) on high.
    Arrange the baguette slices on a baking sheet and toast them under the broiler for 1-2 minutes per side, until they are dry and lightly golden.
7. Assemble the Bowls
    Set 4-6 oven-safe soup bowls (cassolettes) on a sturdy baking sheet.
    Ladle the hot soup into the bowls, filling them about three-quarters full.
    Float one or two toasted baguette slices on top of the soup in each bowl.
    Generously pile the shredded Gruyère cheese (and Parmesan, if using) on top of the bread.
8. Broil to Perfection
    Carefully place the baking sheet with the bowls under the preheated broiler.
    Broil for 3-5 minutes, watching very closely to prevent burning. The cheese should be completely melted, bubbling, and golden brown in spots.
    Tip: The bowls will be extremely hot. Use oven mitts and warn your guests.
9. Serve Immediately
     remove the bowls from the oven and serve immediately while the cheese is molten.